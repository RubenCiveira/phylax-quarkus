/* @autogenerated */
package net.civeira.phylax.common.exception;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;

import org.junit.jupiter.api.Test;

import net.civeira.phylax.common.value.validation.ExecutionFail;

class ExecutionExceptionUnitTest {

  @Test
  void testConstructorWithExecutionFail() {
    ExecutionFail fail = new ExecutionFail("EXEC_ERROR", "Process failed due to unknown reason");
    ExecutionException ex = new ExecutionException(fail);

    assertTrue(ex.hasErrors());
    assertFalse(ex.isEmpty());
    assertTrue(ex.includeCode("EXEC_ERROR"));
  }

  @Test
  void testConstructorWithCodeAndMessage() {
    ExecutionException ex =
        new ExecutionException("SERVICE_DOWN", "The service is currently unavailable");

    assertTrue(ex.hasErrors());
    assertTrue(ex.includeCode("SERVICE_DOWN"));
    assertEquals(1, ex.getFails().count());
  }

  @Test
  void testGetFailsReturnsCorrectStream() {
    ExecutionFail fail = new ExecutionFail("FAIL_CODE", "Something went wrong");
    ExecutionException ex = new ExecutionException(fail);

    assertEquals(1, ex.getFails().count());
  }
}
