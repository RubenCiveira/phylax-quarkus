package net.civeira.phylax.features.access.useracceptedtermnsofuse.domain;

import java.time.LocalDateTime;
import java.time.ZoneId;

import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import net.civeira.phylax.features.access.tenanttermsofuse.domain.TenantTermsOfUseReference;
import net.civeira.phylax.features.access.user.domain.UserReference;

class UserAcceptedTermnsOfUseChangeSetUnitTest {

  /**
   * @autogenerated CachedGenerator
   */
  @Test
  @DisplayName("Test a entity reference contruction")
  void test_user_accepted_termns_of_use_change_set_builder() {
    UserAcceptedTermnsOfUseChangeSet one =
        new UserAcceptedTermnsOfUseChangeSet().uid("one").user(UserReference.of("one"))
            .conditions(TenantTermsOfUseReference.of("one")).acceptDate(LocalDateTime
                .of(1980, 8, 20, 0, 0).atZone(ZoneId.of("Europe/Madrid")).toOffsetDateTime())
            .version(1).newUid();
    one.uid("two");
    Assertions.assertEquals("two", one.getUid().get(), "Value must equals to the assigned value");
    one.unset("uid");
    Assertions.assertFalse(one.getUid().isPresent(), "After unset, the valeue must be dissapear");
    Assertions.assertEquals(UserReference.of("one"), one.getUser().get(),
        "Value must equals to the intial value");
    one.user(UserReference.of("two"));
    Assertions.assertEquals(UserReference.of("two"), one.getUser().get(),
        "Value must equals to the assigned value");
    one.unset("user");
    Assertions.assertFalse(one.getUser().isPresent(), "After unset, the valeue must be dissapear");
    Assertions.assertEquals(TenantTermsOfUseReference.of("one"), one.getConditions().get(),
        "Value must equals to the intial value");
    one.conditions(TenantTermsOfUseReference.of("two"));
    Assertions.assertEquals(TenantTermsOfUseReference.of("two"), one.getConditions().get(),
        "Value must equals to the assigned value");
    one.unset("conditions");
    Assertions.assertFalse(one.getConditions().isPresent(),
        "After unset, the valeue must be dissapear");
    Assertions.assertEquals(
        LocalDateTime.of(1980, 8, 20, 0, 0).atZone(ZoneId.of("Europe/Madrid")).toOffsetDateTime(),
        one.getAcceptDate().get(), "Value must equals to the intial value");
    one.acceptDate(
        LocalDateTime.of(1981, 9, 6, 0, 0).atZone(ZoneId.of("Europe/Madrid")).toOffsetDateTime());
    Assertions.assertEquals(
        LocalDateTime.of(1981, 9, 6, 0, 0).atZone(ZoneId.of("Europe/Madrid")).toOffsetDateTime(),
        one.getAcceptDate().get(), "Value must equals to the assigned value");
    one.unset("acceptDate");
    Assertions.assertFalse(one.getAcceptDate().isPresent(),
        "After unset, the valeue must be dissapear");
    Assertions.assertEquals(0, one.getVersion().get(), "Value must equals to the intial value");
    one.version(2);
    Assertions.assertEquals(2, one.getVersion().get(), "Value must equals to the assigned value");
    one.unset("version");
    Assertions.assertFalse(one.getVersion().isPresent(),
        "After unset, the valeue must be dissapear");
  }
}
