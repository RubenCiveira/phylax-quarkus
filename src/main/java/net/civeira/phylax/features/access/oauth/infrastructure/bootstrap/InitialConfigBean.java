/* @autogenerated */
package net.civeira.phylax.features.access.oauth.infrastructure.bootstrap;

import java.util.List;

import lombok.Getter;
import net.civeira.phylax.features.access.relyingparty.domain.RelyingPartyChangeSet;
import net.civeira.phylax.features.access.role.domain.RoleChangeSet;
import net.civeira.phylax.features.access.tenant.domain.TenantChangeSet;
import net.civeira.phylax.features.access.trustedclient.domain.AllowedRedirects;
import net.civeira.phylax.features.access.trustedclient.domain.TrustedClientChangeSet;
import net.civeira.phylax.features.access.user.domain.UserChangeSet;
import net.civeira.phylax.features.access.useridentity.domain.Roles;
import net.civeira.phylax.features.access.useridentity.domain.UserIdentityChangeSet;

@Getter
public class InitialConfigBean {
  private final List<RelyingPartyChangeSet> parties;
  private final List<TrustedClientChangeSet> clients;
  private final List<TenantChangeSet> tenants;
  private final List<UserChangeSet> users;
  private final List<RoleChangeSet> roles;
  private final List<UserIdentityChangeSet> identities;

  public InitialConfigBean(String password) {
    RelyingPartyChangeSet party = new RelyingPartyChangeSet().newUid().code("phylax-api")
        .apiKey("1111").enabled(Boolean.TRUE);

    AllowedRedirects local = AllowedRedirects.builder().newUid().url("*").build();

    TrustedClientChangeSet client = new TrustedClientChangeSet().newUid().code("phylax-ui")
        .allowedRedirects(List.of(local)).publicAllow(Boolean.TRUE).enabled(Boolean.TRUE);

    RoleChangeSet role = new RoleChangeSet().newUid().name("ADMIN").relyingParty(party);

    TenantChangeSet tenant = new TenantChangeSet().newUid().name("main").domain("main")
        .enabled(Boolean.TRUE).root(Boolean.TRUE).markForDelete(Boolean.FALSE);

    UserChangeSet root = new UserChangeSet().newUid().name("ROOT").passwordPlain(password)
        .tenant(tenant).enabled(true).useSecondFactors(false);

    Roles userRoleRely = Roles.builder().newUid().role(role).build();
    UserIdentityChangeSet userRelyIdentity = new UserIdentityChangeSet().newUid().user(root)
        .relyingParty(party).roles(List.of(userRoleRely));

    Roles userRoleClient = Roles.builder().newUid().role(role).build();
    UserIdentityChangeSet userClientIdentity = new UserIdentityChangeSet().newUid().user(root)
        .trustedClient(client).roles(List.of(userRoleClient));

    tenants = List.of(tenant);
    parties = List.of(party);
    clients = List.of(client);
    users = List.of(root);
    roles = List.of(role);
    identities = List.of(userRelyIdentity, userClientIdentity);
  }
}
