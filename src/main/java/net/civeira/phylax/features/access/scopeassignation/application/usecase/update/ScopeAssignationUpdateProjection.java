package net.civeira.phylax.features.access.scopeassignation.application.usecase.update;

import java.util.Optional;

import lombok.AccessLevel;
import lombok.Getter;
import lombok.NoArgsConstructor;
import net.civeira.phylax.features.access.scopeassignation.application.visibility.ScopeAssignationVisibleProjection;
import net.civeira.phylax.features.access.scopeassignation.domain.ScopeAssignation;
import net.civeira.phylax.features.access.scopeassignation.domain.valueobject.SecurityDomainVO;
import net.civeira.phylax.features.access.scopeassignation.domain.valueobject.SecurityScopeVO;
import net.civeira.phylax.features.access.scopeassignation.domain.valueobject.UidVO;
import net.civeira.phylax.features.access.scopeassignation.domain.valueobject.VersionVO;
import net.civeira.phylax.features.access.securitydomain.domain.SecurityDomainRef;
import net.civeira.phylax.features.access.securityscope.domain.SecurityScopeRef;

/**
 * A dto transfer to hold scope assignation attribute values
 */
@NoArgsConstructor(access = AccessLevel.PRIVATE)
@Getter
public class ScopeAssignationUpdateProjection {

  /**
   * Create a dto instance with all the values of an entity
   *
   * @autogenerated UpdateProjectionGenerator
   * @param visible The entity who provide values.
   * @return
   */
  public static ScopeAssignationUpdateProjection from(
      final ScopeAssignationVisibleProjection visible) {
    ScopeAssignationUpdateProjection instance = new ScopeAssignationUpdateProjection();
    instance.uidValue = visible.getUid();
    instance.securityDomainValue = visible.getSecurityDomain();
    instance.securityScopeValue = visible.getSecurityScope();
    instance.versionValue = visible.getVersion();
    return instance;
  }

  /**
   * El security domain de scope assignation
   *
   * @autogenerated UpdateProjectionGenerator
   */
  private Optional<SecurityDomainVO> securityDomainValue;

  /**
   * El security scope de scope assignation
   *
   * @autogenerated UpdateProjectionGenerator
   */
  private Optional<SecurityScopeVO> securityScopeValue;

  /**
   * El uid de scope assignation
   *
   * @autogenerated UpdateProjectionGenerator
   */
  private Optional<UidVO> uidValue;

  /**
   * Campo con el n√∫mero de version de scope assignation para controlar bloqueos optimistas
   *
   * @autogenerated UpdateProjectionGenerator
   */
  private Optional<VersionVO> versionValue;

  /**
   * Create a dto instance with all the values of an entity
   *
   * @autogenerated UpdateProjectionGenerator
   * @param entity The entity who provide values.
   */
  public ScopeAssignationUpdateProjection(final ScopeAssignation entity) {
    uidValue = Optional.of(entity.getUidValue());
    securityDomainValue = Optional.of(entity.getSecurityDomainValue());
    securityScopeValue = Optional.of(entity.getSecurityScopeValue());
    versionValue = Optional.of(entity.getVersionValue());
  }

  /**
   * Inform for a possible change propolsal in SecurityDomain
   *
   * @autogenerated UpdateProjectionGenerator
   * @return empty if there is no change proposal for SecurityDomain, otherwise the value for
   *         SecurityDomain
   */
  public SecurityDomainRef getSecurityDomain() {
    return securityDomainValue.map(SecurityDomainVO::getSecurityDomain).orElse(null);
  }

  /**
   * Inform for a possible change propolsal in SecurityDomain
   *
   * @autogenerated UpdateProjectionGenerator
   * @return empty if there is no change proposal for SecurityDomain, otherwise the value for
   *         SecurityDomain
   */
  public String getSecurityDomainReference() {
    return getSecurityDomainReferenceOrDefault(null);
  }

  /**
   * Inform for a possible change propolsal in SecurityDomain
   *
   * @autogenerated UpdateProjectionGenerator
   * @param orDefault
   * @return empty if there is no change proposal for SecurityDomain, otherwise the value for
   *         SecurityDomain
   */
  public String getSecurityDomainReferenceOrDefault(final String orDefault) {
    return securityDomainValue.map(SecurityDomainVO::getSecurityDomain)
        .map(SecurityDomainRef::getUid).orElse(orDefault);
  }

  /**
   * Inform for a possible change propolsal in SecurityScope
   *
   * @autogenerated UpdateProjectionGenerator
   * @return empty if there is no change proposal for SecurityScope, otherwise the value for
   *         SecurityScope
   */
  public SecurityScopeRef getSecurityScope() {
    return securityScopeValue.map(SecurityScopeVO::getSecurityScope).orElse(null);
  }

  /**
   * Inform for a possible change propolsal in SecurityScope
   *
   * @autogenerated UpdateProjectionGenerator
   * @return empty if there is no change proposal for SecurityScope, otherwise the value for
   *         SecurityScope
   */
  public String getSecurityScopeReference() {
    return getSecurityScopeReferenceOrDefault(null);
  }

  /**
   * Inform for a possible change propolsal in SecurityScope
   *
   * @autogenerated UpdateProjectionGenerator
   * @param orDefault
   * @return empty if there is no change proposal for SecurityScope, otherwise the value for
   *         SecurityScope
   */
  public String getSecurityScopeReferenceOrDefault(final String orDefault) {
    return securityScopeValue.map(SecurityScopeVO::getSecurityScope).map(SecurityScopeRef::getUid)
        .orElse(orDefault);
  }

  /**
   * Inform for a possible change propolsal in Uid
   *
   * @autogenerated UpdateProjectionGenerator
   * @return empty if there is no change proposal for Uid, otherwise the value for Uid
   */
  public String getUid() {
    return getUidOrDefault(null);
  }

  /**
   * Inform for a possible change propolsal in Uid
   *
   * @autogenerated UpdateProjectionGenerator
   * @param orDefault Default value if is null
   * @return empty if there is no change proposal for Uid, otherwise the value for Uid
   */
  public String getUidOrDefault(final String orDefault) {
    return uidValue.map(UidVO::getUid).orElse(orDefault);
  }

  /**
   * Inform for a possible change propolsal in Version
   *
   * @autogenerated UpdateProjectionGenerator
   * @return empty if there is no change proposal for Version, otherwise the value for Version
   */
  public Integer getVersion() {
    return getVersionOrDefault(null);
  }

  /**
   * Inform for a possible change propolsal in Version
   *
   * @autogenerated UpdateProjectionGenerator
   * @param orDefault Default value if is null
   * @return empty if there is no change proposal for Version, otherwise the value for Version
   */
  public Integer getVersionOrDefault(final Integer orDefault) {
    return versionValue.flatMap(VersionVO::getVersion).orElse(orDefault);
  }
}
