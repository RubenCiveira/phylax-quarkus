/* autogenerated */
package net.civeira.phylax.common.infrastructure.mail;

import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

import lombok.Builder;
import lombok.Getter;
import lombok.NonNull;

/**
 * Defines an email message with recipients, content, and attachments.
 *
 * The model includes subject, text and HTML content, and optional observers. Inline and standard
 * attachments are supported via {@link Attach} lists. Observers allow callbacks on successful or
 * failed delivery. Instances are typically created using the Lombok builder.
 */
@Builder
@Getter
public class EmailMessage {
  private final String targetName;
  @NonNull
  private final String targetAddress;
  @NonNull
  private final String subject;
  @NonNull
  private final String content;
  @NonNull
  private final String htmlContent;
  private final MailSended sendedObserver;
  private final MailFail failObserver;

  @Builder.Default
  private List<Attach> embbeds = new ArrayList<>();;
  @Builder.Default
  private List<Attach> attacheds = new ArrayList<>();;

  /**
   * Returns the optional observer notified on successful send.
   *
   * This allows callers to trigger follow-up actions after delivery. The observer is invoked by
   * {@link EmailService} when sending succeeds. If no observer is configured, the optional is
   * empty.
   *
   * @return optional success observer
   */
  public Optional<MailSended> getSendedObserver() {
    return Optional.ofNullable(sendedObserver);
  }

  /**
   * Returns the optional observer notified on send failure.
   *
   * This allows callers to react to delivery errors programmatically. The observer is invoked by
   * {@link EmailService} when sending fails. If no observer is configured, the optional is empty.
   *
   * @return optional failure observer
   */
  public Optional<MailFail> getFailObserver() {
    return Optional.ofNullable(failObserver);
  }
}
