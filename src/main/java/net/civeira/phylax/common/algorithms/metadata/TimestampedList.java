/* @autogenerated */
package net.civeira.phylax.common.algorithms.metadata;

import java.time.Instant;
import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

import lombok.EqualsAndHashCode;

/**
 * A list implementation that carries metadata indicating when the data was generated.
 *
 * This is useful for caching and synchronization where freshness matters. The list wraps the data
 * from a {@link WrapMetadata} instance and keeps its timestamp. Consumers can read the generation
 * time to validate staleness of list contents. The class behaves like a regular {@link ArrayList}
 * for iteration and access.
 *
 * @param <T> the type of elements in this list
 */
@EqualsAndHashCode(callSuper = true)
public class TimestampedList<T> extends ArrayList<T> implements Timestamped {
  private static final long serialVersionUID = -2874202296198678629L;

  /**
   * The timestamp indicating when the data was generated or last updated.
   */
  private Instant since;

  /**
   * Constructs a {@code TimestampedList} from a {@link WrapMetadata} instance.
   *
   * The provided metadata supplies the list contents and their generation time. This constructor
   * copies the underlying data into this list. The timestamp is stored for later retrieval via
   * {@link #getGeneratedAt()}.
   *
   * @param items metadata containing list data and generation timestamp
   */
  public TimestampedList(WrapMetadata<List<T>> items) {
    super(items.getData());
    this.since = items.getSince();
  }

  /**
   * Returns the timestamp indicating when the data was generated.
   *
   * This timestamp corresponds to the metadata provided at construction time. It can be used to
   * validate cache freshness or recomputation needs. Returns an empty optional when the timestamp
   * is not available.
   *
   * @return an optional containing the generation {@link Instant}, or empty if not set
   */
  @Override
  public Optional<Instant> getGeneratedAt() {
    return Optional.ofNullable(since);
  }
}
