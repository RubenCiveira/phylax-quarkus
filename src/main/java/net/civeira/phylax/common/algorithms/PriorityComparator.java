/* @autogenerated */
package net.civeira.phylax.common.algorithms;

import java.util.Comparator;

import jakarta.annotation.Priority;

/**
 * Comparator that orders instances based on their class {@link Priority} annotation.
 *
 * It reads the {@code @Priority} value from the runtime class of each instance. Classes without the
 * annotation are treated as priority 0 for ordering. This supports deterministic ordering when
 * implementations are discovered dynamically. It assumes all instances of a class share the same
 * priority level.
 *
 * @param <T> the type of objects being compared
 */
public class PriorityComparator<T> implements Comparator<T> {

  /**
   * Compares two objects based on their class-level {@link Priority} annotation.
   *
   * The comparison uses the annotation on the runtime class, not the instance. Missing annotations
   * default to a priority value of 0. Returns a negative, zero, or positive value following
   * {@link Comparator} contract.
   *
   * @param one the first object to compare
   * @param other the second object to compare
   * @return ordering based on priority values
   */
  @Override
  public int compare(T one, T other) {
    Priority p1 = one.getClass().getAnnotation(Priority.class);
    Priority p2 = other.getClass().getAnnotation(Priority.class);
    return Integer.compare(p1 == null ? 0 : p1.value(), p2 == null ? 0 : p2.value());
  }
}
